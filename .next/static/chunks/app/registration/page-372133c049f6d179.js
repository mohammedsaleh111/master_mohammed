(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[204],{5458:function(e,a,r){Promise.resolve().then(r.bind(r,6614))},6614:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return h}});var t=r(7437),s=r(2265),n=r(8131),i=r(5978),l=r(4752);let o={_origin:"https://api.emailjs.com"},d=(e,a,r)=>{if(!e)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!a)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!r)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class c{constructor(e){this.status=e.status,this.text=e.responseText}}let m=(e,a,r={})=>new Promise((t,s)=>{let n=new XMLHttpRequest;n.addEventListener("load",({target:e})=>{let a=new c(e);200===a.status||"OK"===a.text?t(a):s(a)}),n.addEventListener("error",({target:e})=>{s(new c(e))}),n.open("POST",o._origin+e,!0),Object.keys(r).forEach(e=>{n.setRequestHeader(e,r[e])}),n.send(a)});var u={send:(e,a,r,t)=>{let s=t||o._userID;return d(s,e,a),m("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:s,service_id:e,template_id:a,template_params:r}),{"Content-type":"application/json"})}},h=()=>{let[e,a]=(0,s.useState)({goal:"",age:"",gender:"",activityLevel:"",userPhone:""}),[r,o]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=(0,l.Aj)(n.I8,async e=>{e?(o({id:e.uid,name:e.displayName,email:e.email}),console.log("تم تسجيل الدخول:",e)):(o(null),console.log("لم يتم تسجيل الدخول."))});return()=>e()},[]);let d=async()=>{try{await (0,l.rh)(n.I8,n.Vv),console.log("تسجيل الدخول تم بنجاح.")}catch(e){console.error("خطأ أثناء تسجيل الدخول:",e),alert("حدث خطأ أثناء تسجيل الدخول. حاول مرة أخرى.")}},c=r=>{let{name:t,value:s}=r.target;a({...e,[t]:s}),console.log("تحديث البيانات:",{...e,[t]:s})},m=async()=>{try{let a={userName:r.name,userEmail:r.email,userPhone:e.userPhone,exerciseName:e.exerciseName,exercisePrice:e.exercisePrice,goal:e.goal,paymentMethod:e.paymentMethod,age:e.age,gender:e.gender,activityLevel:e.activityLevel};await u.send("service_3kz71eb","template_2fafnpo",a,"XNb6U8l6Pb57-H3K9"),alert("تم إرسال البريد الإلكتروني بنجاح!")}catch(e){console.error("خطأ أثناء إرسال البريد الإلكتروني:",e),alert("فشل في إرسال البريد الإلكتروني.")}},h=async()=>{console.log("التحقق من المستخدم قبل الإرسال:",r);try{if(!r){alert("يرجى تسجيل الدخول أولاً.");return}let a=(0,i.JU)(n.db,"users",r.id);(await (0,i.QT)(a)).exists()||await (0,i.pl)(a,{name:r.name,email:r.email,userPhone:e.userPhone,age:e.age,gender:e.gender,activityLevel:e.activityLevel,goal:e.goal}),await m();let t=(0,i.hJ)(a,"purchasedExercises");await (0,i.ET)(t,{exerciseName:exerciseName,exercisePrice:exercisePrice,purchaseDate:new Date().toISOString(),paymentMethod:e.paymentMethod}),alert("تم شراء التمرين بنجاح!")}catch(e){console.error("خطأ أثناء حفظ بيانات التمرين:",e),alert("حدث خطأ. حاول مرة أخرى.")}},p=async a=>{a.preventDefault(),console.log("تم تقديم النموذج:",e),"orangeCash"===e.paymentMethod?(alert("يرجى إرسال ثمن التمرين إلى رقم المدرب بعد التواصل معه."),h()):"creditCard"===e.paymentMethod&&(confirm("هل تريد إتمام الدفع عبر الكارت؟")?(alert("تمت عملية الدفع بنجاح."),h()):alert("تم إلغاء الدفع."))};return r?(0,t.jsx)("div",{className:"p-8 bg-gray-100 min-h-screen",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 max-w-lg mx-auto",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold text-center mb-4",children:"تسجيل شراء تمرين"}),(0,t.jsxs)("p",{className:"text-gray-700",children:["الاسم: ",r.name]}),(0,t.jsxs)("p",{className:"text-gray-700",children:["البريد الإلكتروني: ",r.email]}),(0,t.jsxs)("p",{className:"text-gray-700",children:["اسم التمرين: ",exerciseName]}),(0,t.jsxs)("p",{className:"text-gray-700",children:["ثمن التمرين: $",exercisePrice]}),(0,t.jsxs)("form",{className:"flex flex-col",onSubmit:p,children:[(0,t.jsx)("label",{className:"mt-4",children:"الهدف من التمرين:"}),(0,t.jsx)("input",{type:"text",name:"goal",value:e.goal,onChange:c,required:!0,className:"border border-gray-300 p-2 rounded-md"}),(0,t.jsx)("label",{className:"mt-4",children:"العمر:"}),(0,t.jsx)("input",{type:"number",name:"age",value:e.age,onChange:c,required:!0,className:"border border-gray-300 p-2 rounded-md"}),(0,t.jsx)("label",{className:"mt-4",children:"رقم الواتس:"}),(0,t.jsx)("input",{type:"number",name:"userPhone",value:e.userPhone,onChange:c,required:!0,className:"border border-gray-300 p-2 rounded-md"}),(0,t.jsx)("label",{className:"mt-4",children:"الجنس:"}),(0,t.jsxs)("select",{name:"gender",value:e.gender,onChange:c,required:!0,className:"border border-gray-300 p-2 rounded-md",children:[(0,t.jsx)("option",{value:"",children:"اختر"}),(0,t.jsx)("option",{value:"male",children:"ذكر"}),(0,t.jsx)("option",{value:"female",children:"أنثى"})]}),(0,t.jsx)("label",{className:"mt-4",children:"مستوى النشاط:"}),(0,t.jsxs)("select",{name:"activityLevel",value:e.activityLevel,onChange:c,required:!0,className:"border border-gray-300 p-2 rounded-md",children:[(0,t.jsx)("option",{value:"",children:"اختر"}),(0,t.jsx)("option",{value:"low",children:"منخفض"}),(0,t.jsx)("option",{value:"moderate",children:"متوسط"}),(0,t.jsx)("option",{value:"high",children:"مرتفع"})]}),(0,t.jsx)("label",{className:"mt-4",children:"طريقة الدفع:"}),(0,t.jsxs)("select",{name:"paymentMethod",value:e.paymentMethod,onChange:c,required:!0,className:"border border-gray-300 p-2 rounded-md",children:[(0,t.jsx)("option",{value:"",children:"اختر"}),(0,t.jsx)("option",{value:"orangeCash",children:"أورانج كاش"}),(0,t.jsx)("option",{value:"creditCard",children:"كارت دفع"})]}),(0,t.jsx)("button",{type:"submit",className:"mt-6 bg-pink py-2 rounded-md hover:bg-blue-600",children:"شراء التمرين"})]})]})}):(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{children:"يرجى تسجيل الدخول باستخدام Google للوصول إلى النموذج"}),(0,t.jsx)("button",{onClick:d,children:"تسجيل الدخول باستخدام Google"})]})}},8131:function(e,a,r){"use strict";r.d(a,{F6:function(){return s.F6},I8:function(){return l},Vv:function(){return d},db:function(){return o}});var t=r(738),s=r(4752),n=r(5978);let i=(0,t.ZF)({apiKey:"AIzaSyBorC9kXfGX6zQY4NL7ScXakibEXb7S06g",authDomain:"master-mohammed.firebaseapp.com",projectId:"master-mohammed",storageBucket:"master-mohammed.appspot.com",messagingSenderId:"224950210262",appId:"1:224950210262:web:82916d4b790282528fc377",measurementId:"G-KKWHJP51LM"}),l=(0,s.v0)(i),o=(0,n.ad)(i),d=new s.hJ}},function(e){e.O(0,[358,387,434,971,117,744],function(){return e(e.s=5458)}),_N_E=e.O()}]);